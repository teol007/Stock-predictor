schema: '2.0'
stages:
  fetch:
    cmd: "poetry run python src/data/price/fetch_price_data.py\ngit commit -am \"
      Updated raw price data on `date` with DVC pipeline and GitHub workflows\" ||
      echo \"Ignore error\"\ngit push || echo \"Ignore error\"\ndvc push || echo \"\
      Ignore error\"\n"
    deps:
    - path: src/data/price/fetch_price_data.py
      hash: md5
      md5: 29c499019a8848522ece3e76fa757802
      size: 1901
    params:
      params.yaml:
        fetch_price.exchange: NASDAQ
        fetch_price.interval: 15min
        fetch_price.symbol: AAPL
        fetch_price.timezone: Exchange
        fetch_price.weeks_ago: 1
    outs:
    - path: data/raw/price/AAPL_price_data.json
      hash: md5
      md5: 1ad21b0841414bfd771d480284136200
      size: 17877
  preprocess:
    cmd: "poetry run python src/data/price/preprocess_price_data.py\ngit commit -am
      \"Updated preprocessed price data on `date` with DVC pipeline and GitHub workflows\"\
      \ || echo \"Ignore error\"\ngit push || echo \"Ignore error\"\ndvc push || echo
      \"Ignore error\"\n"
    deps:
    - path: data/raw/price/AAPL_price_data.json
      hash: md5
      md5: 1ad21b0841414bfd771d480284136200
      size: 17877
    - path: src/data/price/preprocess_price_data.py
      hash: md5
      md5: 8d579ab816c4e54f58f9a50058a45b05
      size: 2221
    outs:
    - path: data/preprocessed/price
      hash: md5
      md5: 88991b75316fb667d86cfb4b6f9f6c23.dir
      size: 388032
      nfiles: 1
  validate:
    cmd: "cd gx && poetry run python run_checkpoint.py\n"
    deps:
    - path: data/preprocessed/price/
      hash: md5
      md5: 88991b75316fb667d86cfb4b6f9f6c23.dir
      size: 388032
      nfiles: 1
    - path: gx/run_checkpoint.py
      hash: md5
      md5: 87faeba30a02a36a8005c0be056c806c
      size: 702
    outs:
    - path: gx/uncommitted
      hash: md5
      md5: c3ecab7ded985fcc07e394592ca42078.dir
      size: 8748488
      nfiles: 102
  test_data:
    cmd: "poetry run python src/data/price/test_data.py\n"
    deps:
    - path: data/preprocessed/price/
      hash: md5
      md5: 88991b75316fb667d86cfb4b6f9f6c23.dir
      size: 388032
      nfiles: 1
    - path: src/data/price/test_data.py
      hash: md5
      md5: 3f95a42eb6e14ed5e1989d8c4dc676a8
      size: 1986
    outs:
    - path: data/reference/price
      hash: md5
      md5: 88991b75316fb667d86cfb4b6f9f6c23.dir
      size: 388032
      nfiles: 1
    - path: reports
      hash: md5
      md5: 07af2c33cc4f1cecc7cfd56f2e95d221.dir
      size: 3949345
      nfiles: 2
  train:
    cmd: "poetry run python src/model/price/train.py\ngit commit -am \"Updated model
      on `date` with DVC pipeline and GitHub workflows\" || echo \"Ignore error\"\n
      git push || echo \"Ignore error\"\ndvc push || echo \"Ignore error\"\n"
    deps:
    - path: data/preprocessed/price/
      hash: md5
      md5: 88991b75316fb667d86cfb4b6f9f6c23.dir
      size: 388032
      nfiles: 1
    - path: data/reference/price
      hash: md5
      md5: 88991b75316fb667d86cfb4b6f9f6c23.dir
      size: 388032
      nfiles: 1
    - path: gx/uncommitted
      hash: md5
      md5: c3ecab7ded985fcc07e394592ca42078.dir
      size: 8748488
      nfiles: 102
    - path: src/model/price/preprocess.py
      hash: md5
      md5: e4a9f5b7431772373df796ac2d914316
      size: 2037
    - path: src/model/price/train.py
      hash: md5
      md5: 457256de1dffd95a837e381d31cb21ba
      size: 8950
    params:
      params.yaml:
        train_price.dataset_filename: AAPL.csv
        train_price.random_state: 42
        train_price.target_cols:
        - open_price
        - high_price
        - low_price
        - close_price
        train_price.test_size: 2000
        train_price.window_size: 78
    outs:
    - path: models
      hash: md5
      md5: c17348de3734adabcb14c798bbc323a2.dir
      size: 626502
      nfiles: 4
