schema: '2.0'
stages:
  fetch:
    cmd: "poetry run python src/data/price/fetch_price_data.py\ngit commit -am \"\
      Updated raw price data on `date` with DVC pipeline and GitHub workflows\" ||
      echo \"Ignore error\"\ngit push || echo \"Ignore error\"\ndvc push || echo \"\
      Ignore error\"\n"
    deps:
    - path: src/data/price/fetch_price_data.py
      hash: md5
      md5: 20f55145d51c62cbc30bb2bbb9de1e0b
      size: 1849
    params:
      params.yaml:
        fetch_price.exchange: NASDAQ
        fetch_price.interval: 15min
        fetch_price.symbol: AAPL
        fetch_price.timezone: Exchange
        fetch_price.weeks_ago: 1
    outs:
    - path: data/raw/price/AAPL_price_data.json
      hash: md5
      md5: 18ac5656c728a5b321f1446a7ea33f3a
      size: 16945
  preprocess:
    cmd: "poetry run python src/data/price/preprocess_price_data.py\ngit commit -am
      \"Updated preprocessed price data on `date` with DVC pipeline and GitHub workflows\"\
      \ || echo \"Ignore error\"\ngit push || echo \"Ignore error\"\ndvc push || echo
      \"Ignore error\"\n"
    deps:
    - path: data/raw/price/AAPL_price_data.json
      hash: md5
      md5: 18ac5656c728a5b321f1446a7ea33f3a
      size: 16945
    - path: src/data/price/preprocess_price_data.py
      hash: md5
      md5: 9ffc27e7abdb2d49df68d958e12878ae
      size: 2169
    outs:
    - path: data/preprocessed/price
      hash: md5
      md5: 4278560c89503c4139278b0962fb8b44.dir
      size: 384470
      nfiles: 1
  validate:
    cmd: "cd gx && poetry run python run_checkpoint.py\n"
    deps:
    - path: data/preprocessed/price/
      hash: md5
      md5: 4278560c89503c4139278b0962fb8b44.dir
      size: 384470
      nfiles: 1
    - path: gx/run_checkpoint.py
      hash: md5
      md5: b0e9b3633585fd8e79c24167559c7d98
      size: 670
    outs:
    - path: gx/uncommitted
      hash: md5
      md5: 2fdef9eca104abcf5f28da5e7c0a5c77.dir
      size: 9001286
      nfiles: 108
  test_data:
    cmd: "poetry run python src/data/price/test_data.py\n"
    deps:
    - path: data/preprocessed/price/
      hash: md5
      md5: 4278560c89503c4139278b0962fb8b44.dir
      size: 384470
      nfiles: 1
    - path: src/data/price/test_data.py
      hash: md5
      md5: 89585172f59871bdd0ae8febccce3b62
      size: 1926
    outs:
    - path: data/reference/price
      hash: md5
      md5: 33e46f9ef9889fecb790146c89b4e6be.dir
      size: 384334
      nfiles: 1
    - path: reports
      hash: md5
      md5: 8f353142035ac18f8090bf79a6711418.dir
      size: 3948306
      nfiles: 2
  train:
    cmd: "poetry run python src/model/price/train.py\npoetry run python src/model/activity/train.py\n\
      git commit -am \"Updated model on `date` with DVC pipeline and GitHub workflows\"\
      \ || echo \"Ignore error\"\ngit push || echo \"Ignore error\"\ndvc push || echo
      \"Ignore error\"\n"
    deps:
    - path: data/preprocessed/price/
      hash: md5
      md5: 4278560c89503c4139278b0962fb8b44.dir
      size: 384470
      nfiles: 1
    - path: data/reference/price
      hash: md5
      md5: 33e46f9ef9889fecb790146c89b4e6be.dir
      size: 384334
      nfiles: 1
    - path: gx/uncommitted
      hash: md5
      md5: 2fdef9eca104abcf5f28da5e7c0a5c77.dir
      size: 9001286
      nfiles: 108
    - path: src/model/activity/train.py
      hash: md5
      md5: 53b28bdeb5df4f6a413d8e2f638f1e33
      size: 4239
    - path: src/model/price/preprocess.py
      hash: md5
      md5: d2e7954043164204ac06f32f72d2bfaa
      size: 1976
    - path: src/model/price/train.py
      hash: md5
      md5: c022d5e577fb3314e5d23d484a4e0037
      size: 8727
    params:
      params.yaml:
        train_price.dataset_filename: AAPL.csv
        train_price.random_state: 42
        train_price.target_cols:
        - open_price
        - high_price
        - low_price
        - close_price
        train_price.test_size: 2000
        train_price.window_size: 78
    outs:
    - path: models
      hash: md5
      md5: e1fba6942c6e3234ed968cd1b8b1b0e7.dir
      size: 30021678
      nfiles: 5
